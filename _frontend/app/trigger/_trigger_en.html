<form ng-submit="updateUser($event)">

    <div layout="column">
        <md-checkbox ng-model="trigger.enabled" class="md-primary">
            <p class="no_margins md-subhead">
                Activate the Trigger<br/>
                <small>
                    Enable the algorithm described below.
                </small>
            </p>
        </md-checkbox>

        <div class="md-body-1">
            <p class="md-headline no_margins">Phase 1</p>
            <div layout-xs="column" layout="row" layout-padding>
                <div flex-gt-xs="70">
                    After
                    <md-input-container md-no-float class="smallint_filed">
                        <input type="number" min="1" max="59" required ng-model="trigger.x">
                    </md-input-container>
                    <md-input-container>
                        <md-select ng-model="trigger.timeUnit">
                            <md-option value="WEEKS">{{::i18n("%time_unit.WEEKS%")}}</md-option>
                            <md-option value="DAYS">{{::i18n("%time_unit.DAYS%")}}</md-option>
                            <md-option value="HOURS">{{::i18n("%time_unit.HOURS%")}}</md-option>
                            <md-option value="MINUTES">{{::i18n("%time_unit.MINUTES%")}}</md-option>
                        </md-select>
                    </md-input-container>
                    from the date of your last activity in the system, we will send first verification email to email
                    address
                    <md-input-container md-no-float class="email_filed">
                        <input ng-model="triggerInternal.xemails" placeholder="email addresses" required>
                    </md-input-container>
                </div>
                <div flex>
                    <i>
                        Each verification email contains
                        <a href ng-href="/api/alive?user_uuid={{user.uuid|encodeUri}}&key={{triggerInternal.resetKey}}"
                           target="_blank">
                            unique, immutable link</a>. Clicking on that link updates the date of your last activity.

                        <md-button class="md-icon-button help" ng-click="showHelp1()">
                            <md-icon>help</md-icon>
                        </md-button>

                        <br/>
                        Click <a href ng-click="send_x_notification($event)">here</a> to send a sample notification for
                        phase 1, become familiar with its content and make sure it does not land in the Spam folder.
                    </i>
                </div>
            </div>

            <p class="md-headline no_margins">Phase 2</p>
            <div layout-xs="column" layout="row" layout-padding>
                <div flex-gt-xs="70">
                    If the link is not clicked in the next
                    <md-input-container md-no-float class="smallint_filed">
                        <input type="number" min="1" max="59" required ng-model="trigger.y">
                    </md-input-container>
                    {{trigger_tu}}, we will send a second verification email to recipients from Phase 1 and to the
                    following email address:
                    <md-input-container md-no-float class="email_filed">
                        <input ng-model="triggerInternal.yemails" placeholder="email addresses">
                    </md-input-container>
                </div>
                <div flex>
                    <i>
                        We recommend putting your other email addresses here. Multiple email addresses have to be
                        separated
                        by a comma or semicolon.
                        <br/> <br/>
                        Click <a href ng-click="send_y_notification($event)">here</a> to send a sample notification for
                        phase 2.
                    </i>
                </div>
            </div>

            <p class="md-headline no_margins">Phase 3</p>
            <div layout-xs="column" layout="row" layout-padding>
                <div flex-gt-xs="70">
                    If the link is not clicked in the next
                    <md-input-container md-no-float class="smallint_filed">
                        <input type="number" min="1" max="59" required ng-model="trigger.z">
                    </md-input-container>
                    {{trigger_tu}}, we will send the last verification email to recipients from Phase 2 and to the
                    following email address:
                    <md-input-container md-no-float class="email_filed">
                        <input ng-model="triggerInternal.zemails" placeholder="email addresses">
                    </md-input-container>
                </div>
                <div flex>
                    <i>
                        We recommend putting your friend's and/or family member's email address here, someone you trust.
                        <br/>
                        <br/>
                        Click <a href ng-click="send_z_notification($event)">here</a> to send a sample notification for
                        phase 3.
                    </i>
                </div>
            </div>

            <p class="md-headline no_margins">Phase 4</p>
            <div layout-xs="column" layout="row" layout-padding>
                <div flex-gt-xs="70">
                    Finally, if the link is not clicked in the next
                    <md-input-container md-no-float class="smallint_filed">
                        <input type="number" min="1" max="59" required ng-model="trigger.w">
                    </md-input-container>
                    {{trigger_tu}}, we will release all your messages from the Outbox directory. The messages will be
                    made available to the selected recipients only and they will be notified about that fact by email.
                </div>
                <div flex>
                    <i>
                        We will make sure that those messages have been delivered, if the recipient does not open the
                        message within 14 days after sending out, we will contact him manually.
                        <br/>
                        <br/>
                        Click <a href ng-click="send_release_notification_dialog($event)">here</a> to send a sample
                        notification about message release.
                    </i>
                </div>
            </div>
        </div>
    </div>

    <div layout="row" layout-align="center">
        <md-button flex-xs flex-gt-xs="33" class="md-primary md-raised" type="submit">
            {{::i18n("%btn.save%")}}
        </md-button>
    </div>

</form>
